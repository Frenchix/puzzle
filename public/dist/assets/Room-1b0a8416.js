import{l as k,n as $,r as o,o as b,H as g,a as e,c as s,b as l,F as h,B as I,t as w,e as L,d as f,p as N,w as j,I as B,C as E,u as R,_ as S}from"./index-b1378635.js";import{_ as M}from"./GameInterface-4094b245.js";const V=l("div",{class:"text-center py-2"}," Joueurs ",-1),G={class:"px-2"},U={class:"flex justify-between"},F={key:0,xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"25",height:"25",viewBox:"0 0 48 48"},O=l("path",{fill:"#43A047",d:"M40.6 12.1L17 35.7 7.4 26.1 4.6 29 17 41.3 43.4 14.9z"},null,-1),H=[O],J={__name:"PlayersList",setup(z){const _=k(),{isAdmin:c,userName:d}=$(_),n=o([]);return b(()=>{g.onUpdatePlayerList(u=>{n.value=u,u.forEach(r=>{r.userName===d.value&&(r.isAdmin?c.value=!0:c.value=!1)})})}),(u,r)=>(e(),s("div",null,[V,l("ul",G,[(e(!0),s(h,null,I(n.value,(p,y)=>(e(),s("li",U,[l("div",null,w(p.userName),1),p.ready?(e(),s("svg",F,H)):L("",!0)]))),256))])]))}},T={class:"w-full h-full flex flex-col lg:flex-row"},q={class:"w-full lg:w-2/12 py-2 lg:max-w-[200px] m-auto lg:m-0 bg-slate-100"},K={key:0,class:"w-full text-center text-lg text-red-500"},Q={key:1,class:"w-full"},W={key:0,class:"w-full"},X={key:1,class:"flex-auto pt-5"},Y={key:0},Z={key:0,class:"w-full text-center"},ee={key:1},se={class:"image-selection"},te=["src","onClick"],oe={class:"puzzle-options py-5 justify-center"},le=l("option",{disabled:"",value:""},"Nombre de pièces",-1),ae=["value"],ne={key:1,class:"text-center pt-5"},ue={__name:"GameDuel",props:["roomId"],setup(z){const _=k(),{isAdmin:c}=$(_),d=z,n=o(!1),u=o(!1),r=o(!1),p=o(null),y=o([]),x=o(""),P=o([]),m=o(""),i=o(null),C=o([49,100,225,400]);function D(t){i.value=t.id}async function A(){if(i.value&&m.value)try{u.value=!0;const v=await(await fetch(`https://puzzle.cloudns.org:5002/api/getImage/${i.value}`)).json();g.puzzleSelected(d.roomId,i.value,m.value,v.src)}catch(t){console.log(t),r.value=!0,x.value="Probleme lors du chargement de l'image"}}return b(async()=>{try{const t=await fetch("https://puzzle.cloudns.org:5002/api/getImages");P.value=await t.json()}catch(t){console.error("Erreur lors du chargement des images",t),r.value=!0,x.value="Probleme lors du chargement des images"}g.onPuzzleReady(t=>{y.value=t.pieces,p.value=t.puzzleImage,i.value=t.imageId,m.value=t.nbPieces,u.value=!1,n.value=!0})}),(t,v)=>(e(),s("div",T,[l("div",q,[f(J)]),r.value?(e(),s("div",K,w(x.value),1)):(e(),s("div",Q,[n.value?(e(),s("div",W,[f(M,{puzzleImage:p.value,puzzleData:y.value,imageId:i.value,nbPieces:m.value,duel:"oui",roomId:d.roomId,isAdmin:N(c),onChangePuzzle:v[0]||(v[0]=a=>n.value=!1)},null,8,["puzzleImage","puzzleData","imageId","nbPieces","roomId","isAdmin"])])):(e(),s("div",X,[N(c)?(e(),s("div",Y,[u.value?(e(),s("div",Z," Génération des pieces ... ")):(e(),s("div",ee,[l("div",se,[(e(!0),s(h,null,I(P.value,a=>(e(),s("div",{key:a.id,class:"image-card"},[l("img",{src:a.src,onClick:re=>D(a),class:E({"selected-image":i.value===a.id})},null,10,te)]))),128))]),l("div",oe,[j(l("select",{"onUpdate:modelValue":v[1]||(v[1]=a=>m.value=a)},[le,(e(!0),s(h,null,I(C.value,a=>(e(),s("option",{key:a,value:a},w(a),9,ae))),128))],512),[[B,m.value]]),l("button",{onClick:A},"Démarrer")])]))])):(e(),s("div",ne," En attente de l'hôte. "))]))]))]))}},de={__name:"Room",setup(z){const _=k(),{userName:c}=$(_),d=R(),n=o();return b(()=>{n.value=d.params.id,g.joinRoom(n.value,c.value)}),(u,r)=>(e(),s(h,null,[l("header",null,[f(S)]),f(ue,{roomId:n.value},null,8,["roomId"])],64))}};export{de as default};
